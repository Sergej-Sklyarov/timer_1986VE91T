#
#  Timer1986
#
#  file : README
#
#  Created on: 14 yan. 2015.
#      Author: Sergey S.Sklyarov (kirra)
#
#

Расчёт значений MDR_TIMERx->PSG и MDR_TIMERx->ARR для таймера в К1986ВЕ91Т (Режим совпадения).

Пример использования:
/**
 * Тактовая частота MCU: 80 МГц
 * Предделитель: 16
 * Делитель основного счёта: 80
 * Желаемое время до срабатывания таймера: 1 сек
 */

void timer_init(void)
{
  MDR_RST_CLK->PER_CLOCK |= 1 << 14; /** разрешение тактирования MDR_TIMER1 */
  MDR_RST_CLK->TIM_CLOCK =(
  4 /** делитель тактовой частоты MDR_TIMER1 (как рассчитывается, см. ниже) */
  |(1 << 24) /** разешение тактирования MDR_TIMER1 */
  );

  MDR_TIMER1->PSG = 0x4F;
  MDR_TIMER1->ARR = 0xF423;

  MDR_TIMER1->IE = (1 << 1); /** разрешение прерывания по совпадению */
  MDR_TIMER1->CNTRL = 1; /** счет вверх по TIM_CLK, таймер вкл. */
  NVIC_EnableIRQ(Timer1_IRQn);

}

void Timer1_IRQHandler(void)
{

  /** Исполняемый код */

  MDR_TIMER1->CNT = 0x0000;
  MDR_TIMER1->STATUS &= ~(1 << 1);
  NVIC_ClearPendingIRQ(Timer1_IRQn);
}

################################################################################

Значение делителя тактовой частоты - это значение степени двойки.
Т.е. если на примере он равен 16, и т.к. 2^4 = 16, то в MDR_RST_CLK->TIM_CLOCK записывается 4.

################################################################################

compile.sh - компиляция программы. Требуются пакеты libgtk+-3.0-dev и valac (на момент написания актуальный версией была 0.28)

install.sh/uninstall.sh - установка/удаление программы (копируется/удаляется в/из /usr/local/bin ).

################################################################################

по всем вопросам обращайтесь на e-mail: s9.saratov@gmail.com 
или в ВК: http://vk.com/sergey.kaif

#
#  End file README
#
